<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sports Analyst Bot</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    :root {
      --futebol: #0d8b3d;
      --basquete: #e65c00;
      --dark: #121212;
      --darker: #0a0a0a;
      --light: #ffffff;
      --gray: #333333;
    }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: #e0e0e0;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: var(--gray);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    }
    h1 {
      text-align: center;
      margin: 0 0 8px 0;
      font-size: 2.2em;
      background: linear-gradient(90deg, var(--futebol), var(--basquete));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    p { text-align: center; opacity: 0.8; margin-bottom: 24px; }

    label {
      display: block;
      margin-top: 16px;
      font-weight: 600;
    }
    input, select {
      width: 100%;
      padding: 12px;
      margin-top: 6px;
      border: none;
      border-radius: 8px;
      background: #444;
      color: white;
      font-size: 1em;
    }
    select { cursor: pointer; }

    button {
      width: 100%;
      margin-top: 28px;
      padding: 14px;
      background: linear-gradient(90deg, var(--futebol), var(--basquete));
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.5); }
    button:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

    #resultado {
      margin-top: 24px;
      padding: 20px;
      background: #1e1e1e;
      border-radius: 12px;
      min-height: 100px;
      line-height: 1.6;
      border-left: 4px solid var(--futebol);
      transition: border-left-color 0.4s;
    }
    .loading {
      text-align: center;
      color: #888;
      font-style: italic;
    }
    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #333;
      border-top: 3px solid #fff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .error { color: #ff6b6b; }
    .footer {
      text-align: center;
      margin-top: 30px;
      font-size: 0.9em;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1><i class="fas fa-robot"></i> Sports Analyst Bot</h1>
    <p>IA especializada em an√°lise de Futebol e Basquete</p>

    <label>Esporte:
      <select id="esporte" onchange="atualizarCor()">
        <option value="futebol">‚öΩ Futebol</option>
        <option value="basquete">üèÄ Basquete</option>
      </select>
    </label>

    <label>Time A (Mandante ou Time 1):
      <input id="timeA" type="text" placeholder="Ex: Flamengo" />
    </label>

    <label>Time B (Visitante ou Time 2):
      <input id="timeB" type="text" placeholder="Ex: Fluminense" />
    </label>

    <label>Modo de An√°lise:
      <select id="modo">
        <option value="historico">Hist√≥rico de confrontos</option>
        <option value="ao vivo">Jogo ao vivo (em andamento)</option>
        <option value="futuro">Pr√≥ximo jogo (previs√£o)</option>
      </select>
    </label>

    <button type="button" onclick="enviarAnalise()" id="btnAnalisar">
      <i class="fas fa-search"></i> Analisar Partida
    </button>

    <div id="resultado">
      Preencha os campos acima e clique em "Analisar Partida" para come√ßar.
    </div>

    <div class="footer">
      Desenvolvido com ‚ù§Ô∏è por quem ama esporte e IA
    </div>
  </div>

  <script>
    const API_URL = "https://bot-sports-analyst2.onrender.com/analisar"; // ‚Üê mude se necess√°rio

    function atualizarCor() {
      const esporte = document.getElementById("esporte").value;
      const cor = esporte === "basquete" ? "var(--basquete)" : "var(--futebol)";
      document.getElementById("resultado").style.borderLeftColor = cor;
      document.querySelector("button").style.background = esporte === "basquete" 
        ? "linear-gradient(90deg, #e65c00, #ff8c1a)" 
        : "linear-gradient(90deg, #0d8b3d, #34d958)";
    }

    async function enviarAnalise() {
      const esporte = document.getElementById("esporte").value;
      const timeA = document.getElementById("timeA").value.trim();
      const timeB = document.getElementById("timeB").value.trim();
      const modo = document.getElementById("modo").value;
      const resultadoEl = document.getElementById("resultado");
      const btn = document.getElementById("btnAnalisar");

      if (!timeA || !timeB) {
        alert("‚ö†Ô∏è Por favor, preencha os dois times!");
        return;
      }

      // UI de carregamento
      resultadoEl.innerHTML = `<div class="loading"><div class="spinner"></div> Processando an√°lise com IA...</div>`;
      btn.disabled = true;
      btn.innerHTML = '<i class="fas fa-cog fa-spin"></i> Analisando...';

      try {
        const resposta = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ esporte, timeA, timeB, modo })
        });

        if (!resposta.ok) throw new Error(`Erro ${resposta.status}`);

        const dados = await resposta.json();

        // Exibe a an√°lise de forma bonita (ajuste conforme o formato do seu backend)
        if (dados.analise || dados.resultado) {
          resultadoEl.innerHTML = `
            <strong>${timeA} √ó ${timeB}</strong><br><br>
            ${dados.analise || dados.resultado || dados.texto || JSON.stringify(dados, null, 2)}
          `.trim();
        } else {
          resultadoEl.innerHTML = "<pre>" + JSON.stringify(dados, null, 2) + "</pre>";
        }

      } catch (erro) {
        console.error(erro);
        resultadoEl.innerHTML = `<span class="error">‚ùå Erro ao conectar com o servidor:<br>${erro.message}</span>`;
      } finally {
        btn.disabled = false;
        btn.innerHTML = '<i class="fas fa-search"></i> Analisar Partida';
      }
    }

    // Cor inicial
    atualizarCor();
  </script>
</body>
</html>
